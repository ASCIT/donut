{% extends "layout.html" %}
{% block scripts %}
{{ super () }}
	<script>
		function calc_GPA() {
			var selects = document.getElementsByTagName("select");
			var prev_gpa = parseFloat(document.getElementById("prev-gpa").value);
			var sum = 0.0;
			var classes = 0;
			
			for (var i = 0; i < selects.length; ++i) {
				var opt = selects[i].selectedIndex;

				if (opt < 12) {
					var to_add = 4.3;
					for (var j = opt; j > 0; --j) {
						to_add -= j % 3 != 0 ? 0.3 : 0.4;
					}
					sum += to_add;
					classes += 1;
				}
				else if (opt == 12) {
					classes += 1;
				}
			}
			
			var result = document.getElementById("result");
			var cur_gpa = Math.round((sum / classes) * 100) / 100;

			if (!isNaN(prev_gpa)) {
				result.innerHTML = "Your GPA is " + Math.round((cur_gpa + prev_gpa) / 2.0 * 100) / 100;
			}
			else {
				result.innerHTML = "Your GPA is " + cur_gpa;
			}
		}
	</script>
{% endblock %}
{% block page %}

<div class="container theme-showcase" role="main">
    <div class="jumbotron">
	    <h2>GPA Calculator</h2>
	    <div class="medium-text">
	    	<p>I'm making this primarily because I have nothing better to do on the site rework
	    	until we get the team back together in better form on Tuesday. So, without further
	    	ado, I present to you a simple GPA calculator that I made basically just because
	    	it was on the Asana to-do list:</p>

		<br>

		<p>Enter your current GPA (if it exists):</p>
		<input id="prev-gpa" type="text" placeholder="Ex: 3.72"></input>

		<br><br>

		<p>Enter the grades you have in your classes:</p>

		{% for i in range(6) %}

		<select>
			<option value="A+">A+</option>
			<option value="A">A</option>
			<option value="A-">A-</option>
			<option value="B+">B+</option>
			<option value="B">B</option>
			<option value="B-">B-</option>
			<option value="C+">C+</option>
			<option value="C">C</option>
			<option value="C-">C-</option>
			<option value="D+">D+</option>
			<option value="D">D</option>
			<option value="D-">D-</option>
			<option value="F">F</option>
			<option value="N">N/A</option>
		</select>

		<br><br>

		{% endfor %}

		<button onclick="calc_GPA()">
			Please Don't Tell Me
		</button>

		<br><br>

	   	<p id="result"></p>

	    </div>
	</div>
</div>

{% endblock %}
